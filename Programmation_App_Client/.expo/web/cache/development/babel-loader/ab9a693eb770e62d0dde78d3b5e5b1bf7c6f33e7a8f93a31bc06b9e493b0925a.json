{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport API_URL from \"./apiUrl\";\nvar SIGN_IN = `\nmutation SignIn($username: String!, $password: String!) {\n  signIn(username: $username, password: $password)\n}\n`;\nvar SIGN_UP = `\nmutation SignUp($username: String!, $password: String!) {\n  signUp(username: $username, password: $password)\n}`;\nvar TODO_LISTS_QUERY = gql`\n  query TodoLists($where: TodoListWhere) {\n    todoLists(where: $where) {\n      id\n      title\n    }\n  }\n`;\nexport function fetchTodoLists() {\n  return _fetchTodoLists.apply(this, arguments);\n}\nfunction _fetchTodoLists() {\n  _fetchTodoLists = _asyncToGenerator(function* () {\n    try {\n      var response = yield fetch(API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: TODO_LISTS_QUERY,\n          variables: {\n            where: {}\n          }\n        })\n      });\n      var result = yield response.json();\n      return result.data.todoLists;\n    } catch (error) {\n      console.error('Error fetching todo lists:', error);\n      throw new Error('Could not fetch todo lists');\n    }\n  });\n  return _fetchTodoLists.apply(this, arguments);\n}\nexport function signIn(username, password) {\n  return fetch(API_URL, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      query: SIGN_IN,\n      variables: {\n        username: username,\n        password: password\n      }\n    })\n  }).then(function (response) {\n    return response.json();\n  }).then(function (jsonResponse) {\n    if (jsonResponse.errors) {\n      throw jsonResponse.errors[0];\n    }\n    return jsonResponse.data.signIn;\n  }).catch(function (error) {\n    throw error;\n  });\n}\nexport function signUp(username, password) {\n  return fetch(API_URL, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      query: SIGN_UP,\n      variables: {\n        username: username,\n        password: password\n      }\n    })\n  }).then(function (response) {\n    return response.json();\n  }).then(function (jsonResponse) {\n    if (jsonResponse.errors) {\n      throw jsonResponse.errors[0];\n    }\n    return jsonResponse.data.signUp;\n  }).catch(function (error) {\n    throw error;\n  });\n}","map":{"version":3,"names":["API_URL","SIGN_IN","SIGN_UP","TODO_LISTS_QUERY","gql","fetchTodoLists","_fetchTodoLists","apply","arguments","_asyncToGenerator","response","fetch","method","headers","body","JSON","stringify","query","variables","where","result","json","data","todoLists","error","console","Error","signIn","username","password","then","jsonResponse","errors","catch","signUp"],"sources":["/home/doguet221/Documents/l3/programmationAppClient/tp4/components/SignIn.js"],"sourcesContent":["import API_URL from './apiUrl';\n\n\nconst SIGN_IN = `\nmutation SignIn($username: String!, $password: String!) {\n  signIn(username: $username, password: $password)\n}\n`\n\nconst SIGN_UP = `\nmutation SignUp($username: String!, $password: String!) {\n  signUp(username: $username, password: $password)\n}`\n\nconst TODO_LISTS_QUERY = gql`\n  query TodoLists($where: TodoListWhere) {\n    todoLists(where: $where) {\n      id\n      title\n    }\n  }\n`;\n\nexport async function fetchTodoLists() {\n  try {\n    const response = await fetch(API_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        query: TODO_LISTS_QUERY,\n        variables: { where: {} },  // Modifie les variables si besoin\n      }),\n    });\n\n    const result = await response.json();\n    return result.data.todoLists;\n  } catch (error) {\n    console.error('Error fetching todo lists:', error);\n    throw new Error('Could not fetch todo lists');\n  }\n}\n\nexport function signIn(username, password) {\n    return fetch(API_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        query: SIGN_IN,\n        variables: {\n          username: username,\n          password: password,\n        },\n      }),\n    })\n      .then((response) => response.json())\n      .then((jsonResponse) => {\n        if (jsonResponse.errors) {\n          throw jsonResponse.errors[0];\n        }\n        return jsonResponse.data.signIn; // Retourne le token (ou autre réponse) après connexion\n      })\n      .catch((error) => {\n        throw error;\n      });\n  }\n\n  export function signUp(username, password) {\n    return fetch(API_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        query: SIGN_UP,\n        variables: {\n          username: username,\n          password: password,\n        },\n      }),\n    })\n      .then((response) => response.json())\n      .then((jsonResponse) => {\n        if (jsonResponse.errors) {\n          throw jsonResponse.errors[0];\n        }\n        return jsonResponse.data.signUp; // Retourne le token après inscription\n      })\n      .catch((error) => {\n        throw error;\n      });\n  }\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}