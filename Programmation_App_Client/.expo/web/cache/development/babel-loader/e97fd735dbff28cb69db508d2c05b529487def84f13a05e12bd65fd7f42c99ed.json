{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { fetchTodoLists } from \"../components/SignIn\";\nimport { TokenContext, UsernameContext } from \"../Context/Context\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function TodoListScreen() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    todoLists = _useState2[0],\n    setTodoLists = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    newTodoTitle = _useState4[0],\n    setNewTodoTitle = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var _useContext = useContext(TokenContext),\n    _useContext2 = _slicedToArray(_useContext, 2),\n    token = _useContext2[0],\n    setToken = _useContext2[1];\n  var _useContext3 = useContext(UsernameContext),\n    _useContext4 = _slicedToArray(_useContext3, 2),\n    username = _useContext4[0],\n    setUsername = _useContext4[1];\n  useEffect(function () {\n    var loadTodoLists = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          var todos = yield fetchTodoLists(token, username);\n          setTodoLists(todos || []);\n        } catch (err) {\n          setError(err.message);\n        }\n      });\n      return function loadTodoLists() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    loadTodoLists();\n  }, []);\n  if (error) return _jsxs(Text, {\n    children: [\"Error: \", error]\n  });\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      children: \"TodoList\"\n    }), _jsx(FlatList, {\n      data: todoLists,\n      keyExtractor: function keyExtractor(item) {\n        return item.id.toString();\n      },\n      renderItem: function renderItem(_ref2) {\n        var item = _ref2.item;\n        return _jsx(View, {\n          children: _jsx(Text, {\n            children: item.title\n          })\n        });\n      }\n    })]\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","useContext","View","Text","FlatList","Button","TextInput","StyleSheet","fetchTodoLists","TokenContext","UsernameContext","jsxs","_jsxs","jsx","_jsx","TodoListScreen","_useState","_useState2","_slicedToArray","todoLists","setTodoLists","_useState3","_useState4","newTodoTitle","setNewTodoTitle","_useState5","_useState6","error","setError","_useContext","_useContext2","token","setToken","_useContext3","_useContext4","username","setUsername","loadTodoLists","_ref","_asyncToGenerator","todos","err","message","apply","arguments","children","style","styles","container","data","keyExtractor","item","id","toString","renderItem","_ref2","title"],"sources":["/home/doguet221/Documents/l3/s1/programmationAppClient/tp4/Screen/todoListScreen.js"],"sourcesContent":["import React, { useEffect, useState, useContext} from 'react';\nimport { View, Text, FlatList, Button, TextInput, StyleSheet } from 'react-native';\nimport { fetchTodoLists } from '../components/SignIn';\nimport { TokenContext, UsernameContext } from '../Context/Context'\n\nexport default function TodoListScreen() {\n  const [todoLists, setTodoLists] = useState([]);\n  const [newTodoTitle, setNewTodoTitle] = useState('');\n  const [error, setError] = useState(null);\n  const [token, setToken] = useContext(TokenContext);\n  const [username, setUsername] = useContext(UsernameContext);\n\n  useEffect(() => {\n    const loadTodoLists = async () => {\n      try {\n        const todos = await fetchTodoLists(token, username);\n        setTodoLists(todos || []);\n      } catch (err) {\n        setError(err.message);\n      }\n    };\n\n    loadTodoLists();\n  }, []);\n\n  if (error) return <Text>Error: {error}</Text>;\n  \n  return (\n    <View style={styles.container}>\n      <Text>TodoList</Text>\n      <FlatList\n        data={todoLists}\n        keyExtractor={(item) => item.id.toString()}\n        renderItem={({ item }) => (\n          <View>\n            <Text>{item.title}</Text>\n          </View>\n        )}\n      />\n    </View>\n  );\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,QAAO,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,QAAA;AAAA,OAAAC,MAAA;AAAA,OAAAC,SAAA;AAAA,OAAAC,UAAA;AAE9D,SAASC,cAAc;AACvB,SAASC,YAAY,EAAEC,eAAe;AAA4B,SAAAC,IAAA,IAAAC,KAAA;AAAA,SAAAC,GAAA,IAAAC,IAAA;AAElE,eAAe,SAASC,cAAcA,CAAA,EAAG;EACvC,IAAAC,SAAA,GAAkChB,QAAQ,CAAC,EAAE,CAAC;IAAAiB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAvCG,SAAS,GAAAF,UAAA;IAAEG,YAAY,GAAAH,UAAA;EAC9B,IAAAI,UAAA,GAAwCrB,QAAQ,CAAC,EAAE,CAAC;IAAAsB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA7CE,YAAY,GAAAD,UAAA;IAAEE,eAAe,GAAAF,UAAA;EACpC,IAAAG,UAAA,GAA0BzB,QAAQ,CAAC,IAAI,CAAC;IAAA0B,UAAA,GAAAR,cAAA,CAAAO,UAAA;IAAjCE,KAAK,GAAAD,UAAA;IAAEE,QAAQ,GAAAF,UAAA;EACtB,IAAAG,WAAA,GAA0B5B,UAAU,CAACQ,YAAY,CAAC;IAAAqB,YAAA,GAAAZ,cAAA,CAAAW,WAAA;IAA3CE,KAAK,GAAAD,YAAA;IAAEE,QAAQ,GAAAF,YAAA;EACtB,IAAAG,YAAA,GAAgChC,UAAU,CAACS,eAAe,CAAC;IAAAwB,YAAA,GAAAhB,cAAA,CAAAe,YAAA;IAApDE,QAAQ,GAAAD,YAAA;IAAEE,WAAW,GAAAF,YAAA;EAE5BnC,SAAS,CAAC,YAAM;IACd,IAAMsC,aAAa;MAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;QAChC,IAAI;UACF,IAAMC,KAAK,SAAShC,cAAc,CAACuB,KAAK,EAAEI,QAAQ,CAAC;UACnDf,YAAY,CAACoB,KAAK,IAAI,EAAE,CAAC;QAC3B,CAAC,CAAC,OAAOC,GAAG,EAAE;UACZb,QAAQ,CAACa,GAAG,CAACC,OAAO,CAAC;QACvB;MACF,CAAC;MAAA,gBAPKL,aAAaA,CAAA;QAAA,OAAAC,IAAA,CAAAK,KAAA,OAAAC,SAAA;MAAA;IAAA,GAOlB;IAEDP,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,EAAE,CAAC;EAEN,IAAIV,KAAK,EAAE,OAAOf,KAAA,CAACT,IAAI;IAAA0C,QAAA,GAAC,SAAO,EAAClB,KAAK;EAAA,CAAO,CAAC;EAE7C,OACEf,KAAA,CAACV,IAAI;IAAC4C,KAAK,EAAEC,MAAM,CAACC,SAAU;IAAAH,QAAA,GAC5B/B,IAAA,CAACX,IAAI;MAAA0C,QAAA,EAAC;IAAQ,CAAM,CAAC,EACrB/B,IAAA,CAACV,QAAQ;MACP6C,IAAI,EAAE9B,SAAU;MAChB+B,YAAY,EAAE,SAAAA,aAACC,IAAI;QAAA,OAAKA,IAAI,CAACC,EAAE,CAACC,QAAQ,CAAC,CAAC;MAAA,CAAC;MAC3CC,UAAU,EAAE,SAAAA,WAAAC,KAAA;QAAA,IAAGJ,IAAI,GAAAI,KAAA,CAAJJ,IAAI;QAAA,OACjBrC,IAAA,CAACZ,IAAI;UAAA2C,QAAA,EACH/B,IAAA,CAACX,IAAI;YAAA0C,QAAA,EAAEM,IAAI,CAACK;UAAK,CAAO;QAAC,CACrB,CAAC;MAAA;IACP,CACH,CAAC;EAAA,CACE,CAAC;AAEX"},"metadata":{},"sourceType":"module","externalDependencies":[]}