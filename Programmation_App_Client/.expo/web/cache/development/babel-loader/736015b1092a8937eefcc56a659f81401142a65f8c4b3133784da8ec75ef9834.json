{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { fetchTodoLists } from \"../components/SignIn\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function TodoListScreen() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    todoLists = _useState2[0],\n    setTodoLists = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    newTodoTitle = _useState4[0],\n    setNewTodoTitle = _useState4[1];\n  var _useState5 = useState(true),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    error = _useState8[0],\n    setError = _useState8[1];\n  var _useContext = useContext(TokenContext),\n    _useContext2 = _slicedToArray(_useContext, 2),\n    token = _useContext2[0],\n    setToken = _useContext2[1];\n  var _useContext3 = useContext(UsernameContext),\n    _useContext4 = _slicedToArray(_useContext3, 2),\n    username = _useContext4[0],\n    setUsername = _useContext4[1];\n  useEffect(function () {\n    var loadTodoLists = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          var todos = yield fetchTodoLists(token, username);\n          setTodoLists(todos || []);\n        } catch (err) {\n          setError(err.message);\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function loadTodoLists() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    loadTodoLists();\n  }, []);\n  if (loading) return _jsx(Text, {\n    children: \"Loading...\"\n  });\n  if (error) return _jsxs(Text, {\n    children: [\"Error: \", error]\n  });\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      children: \"TodoList\"\n    }), _jsx(FlatList, {\n      data: todoLists,\n      keyExtractor: function keyExtractor(item) {\n        return item.id.toString();\n      },\n      renderItem: function renderItem(_ref2) {\n        var item = _ref2.item;\n        return _jsxs(View, {\n          style: styles.todoItem,\n          children: [_jsx(Text, {\n            children: item.title\n          }), _jsx(Button, {\n            title: \"Delete\",\n            onPress: function onPress() {\n              return handleDeleteTodo(item.id);\n            }\n          })]\n        });\n      }\n    }), _jsx(TextInput, {\n      style: styles.input,\n      placeholder: \"New Todo Title\",\n      value: newTodoTitle,\n      onChangeText: setNewTodoTitle\n    }), _jsx(Button, {\n      title: \"Add Todo\",\n      onPress: handleAddTodo\n    })]\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","useContext","View","Text","FlatList","Button","TextInput","StyleSheet","fetchTodoLists","jsx","_jsx","jsxs","_jsxs","TodoListScreen","_useState","_useState2","_slicedToArray","todoLists","setTodoLists","_useState3","_useState4","newTodoTitle","setNewTodoTitle","_useState5","_useState6","loading","setLoading","_useState7","_useState8","error","setError","_useContext","TokenContext","_useContext2","token","setToken","_useContext3","UsernameContext","_useContext4","username","setUsername","loadTodoLists","_ref","_asyncToGenerator","todos","err","message","apply","arguments","children","style","styles","container","data","keyExtractor","item","id","toString","renderItem","_ref2","todoItem","title","onPress","handleDeleteTodo","input","placeholder","value","onChangeText","handleAddTodo"],"sources":["/home/doguet221/Documents/l3/s1/programmationAppClient/tp4/Screen/todoListScreen.js"],"sourcesContent":["import React, { useEffect, useState, useContext} from 'react';\nimport { View, Text, FlatList, Button, TextInput, StyleSheet } from 'react-native';\nimport { fetchTodoLists } from '../components/SignIn';\n\nexport default function TodoListScreen() {\n  const [todoLists, setTodoLists] = useState([]);\n  const [newTodoTitle, setNewTodoTitle] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [token, setToken] = useContext(TokenContext);\n  const [username, setUsername] = useContext(UsernameContext);\n\n  useEffect(() => {\n    const loadTodoLists = async () => {\n      try {\n        const todos = await fetchTodoLists(token, username);\n        setTodoLists(todos || []);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadTodoLists();\n  }, []);\n\n\n  if (loading) return <Text>Loading...</Text>;\n  if (error) return <Text>Error: {error}</Text>;\n\n  return (\n    <View style={styles.container}>\n      <Text>TodoList</Text>\n      <FlatList\n        data={todoLists}\n        keyExtractor={(item) => item.id.toString()}\n        renderItem={({ item }) => (\n          <View style={styles.todoItem}>\n            <Text>{item.title}</Text>\n            <Button title=\"Delete\" onPress={() => handleDeleteTodo(item.id)} />\n          </View>\n        )}\n      />\n      <TextInput\n        style={styles.input}\n        placeholder=\"New Todo Title\"\n        value={newTodoTitle}\n        onChangeText={setNewTodoTitle}\n      />\n      <Button title=\"Add Todo\" onPress={handleAddTodo} />\n    </View>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}